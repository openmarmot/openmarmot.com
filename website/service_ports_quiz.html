<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Common Ports – Multiple Choice Quiz</title>
  <style>
    body {
      font-family: system-ui, -apple-system, sans-serif;
      max-width: 720px;
      margin: 40px auto;
      padding: 0 20px;
      background: #f8f9fa;
      color: #222;
    }
    h1 {
      text-align: center;
      color: #1a3c5e;
    }
    .explanation {
      text-align: center;
      color: #555;
      margin-bottom: 30px;
      font-size: 0.95em;
      line-height: 1.4;
    }
    #card {
      background: white;
      padding: 32px;
      border-radius: 12px;
      box-shadow: 0 5px 20px rgba(0,0,0,0.12);
      min-height: 520px; /* Increased slightly to accommodate always-visible details */
    }
    .field {
      margin: 18px 0;
      font-size: 1.3em;
      line-height: 1.5;
    }
    .label {
      font-weight: 600;
      color: #2c3e50;
      display: inline-block;
      width: 140px;
    }
    .value {
      color: #0066cc;
    }
    .hidden {
      background: #e0e0e0;
      color: #e0e0e0;
      border-radius: 4px;
      padding: 3px 10px;
      user-select: none;
    }
    .revealed {
      background: transparent;
      color: #0066cc;
      padding: 3px 0;
    }
    .prompt {
      font-size: 1.1em;
      color: #444;
      margin-bottom: 24px;
      font-style: italic;
      text-align: center;
    }
    #options {
      margin: 30px 0;
      display: flex;
      flex-direction: column;
      gap: 12px;
    }
    .option {
      background: white;
      padding: 16px;
      border-radius: 8px;
      box-shadow: 0 2px 8px rgba(0,0,0,0.1);
      cursor: pointer;
      transition: all 0.2s;
      font-size: 1.1em;
    }
    .option:hover {
      box-shadow: 0 4px 12px rgba(0,0,0,0.15);
    }
    .option input {
      display: none;
    }
    .option input:checked + span {
      color: #0066cc;
      font-weight: 600;
    }
    .option span {
      display: block;
    }
    .correct {
      background: #d4edda !important;
      border-left: 5px solid #28a745;
    }
    .incorrect {
      background: #f8d7da !important;
      border-left: 5px solid #dc3545;
    }
    #details {
      margin-top: 30px;
      padding-top: 20px;
      border-top: 1px solid #ddd;
    }
    button {
      padding: 14px 32px;
      font-size: 1.15em;
      margin: 20px auto 0;
      border: none;
      border-radius: 8px;
      cursor: pointer;
      transition: all 0.2s;
      display: block;
      min-width: 180px;
    }
    button.check {
      background: #e67e22;
      color: white;
    }
    button.check:hover { background: #d35400; }
    button.next {
      background: #27ae60;
      color: white;
    }
    button.next:hover { background: #219653; }
  </style>
</head>
<body>

  <h1>Common Ports – Multiple Choice Quiz</h1>

  <div id="card">
    <div class="prompt" id="prompt"></div>
    
    <div class="field" id="given-field">
      <span class="label" id="given-label"></span>
      <span class="value" id="given-value"></span>
    </div>

    <div id="options"></div>

    <div id="details">
      <strong>Full Details:</strong>
      <div class="field"><span class="label">Service Name:</span> <span class="value hidden" id="full-service">?</span></div>
      <div class="field"><span class="label">Port(s):</span> <span class="value hidden" id="full-ports">?</span></div>
      <div class="field"><span class="label">Protocol:</span> <span class="value hidden" id="full-proto">?</span></div>
      <div class="field"><span class="label">Description:</span><span class="value hidden" id="full-desc">?</span></div>
    </div>
  </div>

  <button id="action-btn" class="check">Check Answer</button>

  <script>
    const cards = [
      { service: "FTP (File Transfer Protocol)",          ports: "20/21",         proto: "TCP",          desc: "21 = control / 20 = data" },
      { service: "SSH (Secure Shell)",                    ports: "22",            proto: "TCP",          desc: "Encrypted remote login + file transfer" },
      { service: "Telnet",                                ports: "23",            proto: "TCP",          desc: "Unencrypted remote access (insecure)" },
      { service: "SMTP",                                  ports: "25",            proto: "TCP",          desc: "Sending mail between servers" },
      { service: "DNS",                                   ports: "53",            proto: "TCP/UDP",      desc: "Name resolution (UDP most common)" },
      { service: "DHCP",                                  ports: "67/68",         proto: "UDP",          desc: "Automatic IP address assignment" },
      { service: "TFTP",                                  ports: "69",            proto: "UDP",          desc: "Trivial / very simple file transfer" },
      { service: "HTTP",                                  ports: "80",            proto: "TCP",          desc: "Unencrypted web traffic" },
      { service: "POP3",                                  ports: "110",           proto: "TCP",          desc: "Retrieve email – download to client" },
      { service: "NTP",                                   ports: "123",           proto: "UDP",          desc: "Network time synchronization" },
      { service: "NetBIOS",                               ports: "137–139",       proto: "137/138 UDP + 139 TCP", desc: "Legacy Windows file & printer sharing" },
      { service: "IMAP",                                  ports: "143",           proto: "TCP",          desc: "Email sync – stays on server" },
      { service: "SNMP",                                  ports: "161",           proto: "UDP",          desc: "Network device monitoring" },
      { service: "LDAP",                                  ports: "389",           proto: "TCP",          desc: "Directory services (e.g. Active Directory)" },
      { service: "HTTPS",                                 ports: "443",           proto: "TCP",          desc: "Encrypted web traffic (TLS)" },
      { service: "SMB",                                   ports: "445",           proto: "TCP",          desc: "Modern Windows file & printer sharing" },
      { service: "SIP (Session Initiation Protocol)",     ports: "5060",          proto: "UDP/TCP",      desc: "VoIP signaling – 5061 for secure/TLS" },
      { service: "Syslog",                                ports: "514",           proto: "UDP",          desc: "Centralized system logging" },
      { service: "SMTP Submission",                       ports: "587",           proto: "TCP",          desc: "Authenticated client email sending" },
      { service: "MySQL / MariaDB",                       ports: "3306",          proto: "TCP",          desc: "Default database port" },
      { service: "RDP (Remote Desktop Protocol)",         ports: "3389",          proto: "TCP",          desc: "Remote Windows desktop" },
      { service: "HTTP Alternative / Proxy",              ports: "8080",          proto: "TCP",          desc: "Common alternate web port" }
    ];

    const elements = {
      prompt: document.getElementById("prompt"),
      givenLabel: document.getElementById("given-label"),
      givenValue: document.getElementById("given-value"),
      options: document.getElementById("options"),
      fullService: document.getElementById("full-service"),
      fullPorts: document.getElementById("full-ports"),
      fullProto: document.getElementById("full-proto"),
      fullDesc: document.getElementById("full-desc")
    };

    const btn = document.getElementById("action-btn");

    let currentCard = null;
    let questionType = true; // true = service given → guess ports
    let correctValue = "";
    let answered = false;

    function shuffle(array) {
      const arr = array.slice();
      for (let i = arr.length - 1; i > 0; i--) {
        const j = Math.floor(Math.random() * (i + 1));
        [arr[i], arr[j]] = [arr[j], arr[i]];
      }
      return arr;
    }

    function getRandomDistractors(n, valueFn) {
      let others = cards.filter(c => c !== currentCard);
      others = shuffle(others);
      return others.slice(0, n).map(valueFn);
    }

    function resetDetails() {
      elements.fullService.textContent = "?";
      elements.fullService.className = "value hidden";

      elements.fullPorts.textContent = "?";
      elements.fullPorts.className = "value hidden";
      elements.fullPorts.style.fontFamily = "";

      elements.fullProto.textContent = "?";
      elements.fullProto.className = "value hidden";
      elements.fullProto.style.fontFamily = "";

      elements.fullDesc.textContent = "?";
      elements.fullDesc.className = "value hidden";
    }

    function loadNewQuestion() {
      answered = false;
      btn.textContent = "Check Answer";
      btn.className = "check";
      elements.options.innerHTML = "";
      resetDetails();

      const idx = Math.floor(Math.random() * cards.length);
      currentCard = cards[idx];
      questionType = Math.random() < 0.5;

      let distractors;
      let choices;

      if (questionType) {
        // Service given → guess ports
        elements.prompt.textContent = "What port(s) does this service use?";
        elements.givenLabel.textContent = "Service:";
        elements.givenValue.textContent = currentCard.service;
        correctValue = currentCard.ports;
        distractors = getRandomDistractors(4, c => c.ports);
      } else {
        // Ports given → guess service
        elements.prompt.textContent = "What service uses these port(s)?";
        elements.givenLabel.textContent = "Port(s):";
        elements.givenValue.textContent = currentCard.ports;
        elements.givenValue.style.fontFamily = "monospace";
        correctValue = currentCard.service;
        distractors = getRandomDistractors(4, c => c.service);
      }

      choices = shuffle([correctValue, ...distractors]);

      choices.forEach(choice => {
        const label = document.createElement("label");
        label.classList.add("option");

        const input = document.createElement("input");
        input.type = "radio";
        input.name = "choice";
        input.value = choice;

        const span = document.createElement("span");
        span.textContent = choice;

        label.appendChild(input);
        label.appendChild(span);
        elements.options.appendChild(label);
      });
    }

    function checkAnswer() {
      const selected = document.querySelector('input[name="choice"]:checked');
      if (!selected) {
        alert("Please select an answer first!");
        return;
      }

      const selectedValue = selected.value;
      const isCorrect = selectedValue === correctValue;

      // Disable all radios
      document.querySelectorAll('input[name="choice"]').forEach(i => i.disabled = true);

      // Highlight correct / incorrect
      document.querySelectorAll(".option").forEach(label => {
        const val = label.querySelector("input").value;
        if (val === correctValue) label.classList.add("correct");
        if (val === selectedValue && !isCorrect) label.classList.add("incorrect");
      });

      // Reveal full details
      elements.fullService.textContent = currentCard.service;
      elements.fullService.className = "value revealed";

      elements.fullPorts.textContent = currentCard.ports;
      elements.fullPorts.className = "value revealed";
      elements.fullPorts.style.fontFamily = "monospace";

      elements.fullProto.textContent = currentCard.proto;
      elements.fullProto.className = "value revealed";
      elements.fullProto.style.fontFamily = "monospace";

      elements.fullDesc.textContent = currentCard.desc;
      elements.fullDesc.className = "value revealed";

      answered = true;
      btn.textContent = "Next Question";
      btn.className = "next";
    }

    btn.onclick = () => {
      if (!answered) {
        checkAnswer();
      } else {
        loadNewQuestion();
      }
    };

    // Start
    loadNewQuestion();
  </script>
</body>
</html>